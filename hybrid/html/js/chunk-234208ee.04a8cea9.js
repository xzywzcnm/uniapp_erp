(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-234208ee"],{"4cd3":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{class:t.wrap},[e("mu-row",{staticClass:"wrapContainer"},[e("mu-col",{attrs:{span:10}},[e("div",{staticClass:"platformSelect"},[e("mu-select",{attrs:{label:"","full-width":""},model:{value:t.selected,callback:function(a){t.selected=a},expression:"selected"}},t._l(t.platformList,function(t){return e("mu-option",{attrs:{label:t.name,selected:"selected",value:t.name}})}),1)],1),e("mu-row",{staticClass:"dateSelect"},[e("mu-col",{attrs:{span:5}},[e("mu-date-input",{attrs:{"no-display":"",label:"",type:"date",container:"bottomSheet","label-float":"","full-width":""},on:{change:t.getFormDate},model:{value:t.fromDate.fromDate,callback:function(a){t.$set(t.fromDate,"fromDate",a)},expression:"fromDate.fromDate"}})],1),e("mu-col",{staticClass:"dateTo",attrs:{span:2}},[t._v("\n          至\n        ")]),e("mu-col",{attrs:{span:5}},[e("mu-date-input",{attrs:{"no-display":"",label:"",type:"date",container:"bottomSheet","label-float":"","full-width":""},on:{change:t.getToDate},model:{value:t.fromDate.toDate,callback:function(a){t.$set(t.fromDate,"toDate",a)},expression:"fromDate.toDate"}})],1)],1)],1),e("mu-col",{attrs:{span:2}},[e("div",{staticClass:"searchBit",on:{click:t.search}},[e("i",{staticClass:"material-icons"},[t._v("\n        search\n        ")]),e("div",[t._v("查询")])])])],1),e("div",{staticClass:"whiteBgColor detailsPlatformData"},[e("mu-tabs",{staticClass:"whiteBgColor tabContainer",attrs:{value:t.active2,inverse:"",color:"primary","indicator-color":"primary","text-color":"rgba(0, 0, 0, .54)"},on:{"update:value":function(a){t.active2=a}}},[e("mu-tab",[t._v("平台帐号")]),e("mu-tab",[t._v("日期")])],1)],1),0===t.active2?e("div",{staticClass:"whiteBgColor"},[e("mu-flex",{staticClass:"flex-wrapper nomralPadding",attrs:{"justify-content":"center","align-items":"center"}},[e("mu-data-table",{staticClass:"normalTop tabTable",attrs:{border:"",columns:t.platformListColumns,sort:t.logistSort,data:t.singlePlatformList},on:{"row-click":t.rowClick,"update:sort":function(a){t.logistSort=a}},scopedSlots:t._u([{key:"default",fn:function(a){return[e("td",{staticClass:"is-center clickRow",attrs:{"data-action":a.row}},[t._v(t._s(a.row.name))]),e("td",{staticClass:"is-center clickRow",attrs:{"data-action":a.row}},[t._v(t._s(a.row.num))]),e("td",{staticClass:"is-center clickRow",attrs:{"data-action":a.row}},[t._v(t._s(a.row.currencyCode)+" "+t._s(0!==a.row.amount?a.row.amount.toFixed(2):0))]),e("td",{staticClass:"is-center clickRow",attrs:{"data-action":a.row}},[e("i",{staticClass:"material-icons grayFontColor"},[t._v("\n            chevron_right\n            ")])])]}}],null,!1,2868068170)})],1),e("mu-flex",{staticClass:"flex-wrapper nomralPadding",attrs:{"justify-content":"center","align-items":"center"}},[e("div",{staticStyle:{width:"100%",height:"420px",margin:"0 auto"},attrs:{id:"pByAccountListMap"}})])],1):t._e(),1===t.active2?e("div",{staticClass:"whiteBgColor"},[e("mu-flex",{staticClass:"flex-wrapper nomralPadding",attrs:{"justify-content":"center","align-items":"center"}},[e("mu-data-table",{staticClass:"normalTop tabTable",attrs:{border:"",columns:t.platformListByDateColumns,sort:t.platformSort,data:t.platformListByDate},on:{"update:sort":function(a){t.platformSort=a}},scopedSlots:t._u([{key:"default",fn:function(a){return[e("td",{staticClass:"is-center clickRow",attrs:{"data-action":a.row}},[t._v(t._s(a.row.date))]),e("td",{staticClass:"is-center clickRow",attrs:{"data-action":a.row}},[t._v(t._s(a.row.num))]),e("td",{staticClass:"is-center clickRow",attrs:{"data-action":a.row}},[t._v(t._s(a.row.currencyCode)+" ")]),e("td",{staticClass:"is-center clickRow",attrs:{"data-action":a.row}},[t._v("\n            "+t._s(0!==a.row.amount?a.row.amount.toFixed(2):0)+"\n          ")])]}}],null,!1,3278159523)})],1),e("mu-flex",{staticClass:"flex-wrapper nomralPadding",attrs:{"justify-content":"center","align-items":"center"}},[e("div",{staticStyle:{width:"100%",height:"420px",margin:"0 auto"},attrs:{id:"pByDayListMap"}})])],1):t._e(),e("mu-dialog",{attrs:{"max-width":"80%",open:t.openSimple,scrollable:"","overlay-close":"","lock-scroll":""},on:{"update:open":function(a){t.openSimple=a}}},[e("mu-flex",{staticClass:"flex-wrapper",attrs:{"justify-content":"center"}},[t._v("\n      查询平台账号数据明细\n    ")]),e("mu-divider"),e("mu-flex",{staticClass:"flex-wrapper normalTop",attrs:{"justify-content":"center","align-items":"center"}},[e("mu-data-table",{staticClass:"salesTotalTable",attrs:{columns:t.platformListByDateColumns,sort:t.platformSort,data:t.accountByDayList},on:{"update:sort":function(a){t.platformSort=a}},scopedSlots:t._u([{key:"default",fn:function(a){return[e("td",{staticClass:"is-center clickRow",attrs:{"data-action":a.row}},[t._v(t._s(a.row.date))]),e("td",{staticClass:"is-center clickRow",attrs:{"data-action":a.row}},[t._v(t._s(a.row.num))]),e("td",{staticClass:"is-center clickRow",attrs:{"data-action":a.row}},[t._v(t._s(a.row.currencyCode)+" ")]),e("td",{staticClass:"is-center clickRow",attrs:{"data-action":a.row}},[t._v("\n            "+t._s(a.row.amount)+"\n          ")])]}}])})],1)],1)],1)},n=[],r=(e("ac6a"),e("7f7f"),e("4ec3")),l=e("0a8d"),i=e("313e"),s=e.n(i),c="tongtool-analysis-platformWrap",m={mixins:[l["a"]],data:function(){return{openSimple:!1,active2:0,selected:"3",fromDate:{fromDate:null,toDate:null},platformListColumns:[{title:"平台帐号",width:100,name:"name"},{title:"数量",name:"orderNum",width:80,align:"center"},{title:"金额",name:"amount",width:80,align:"center"},{title:"",name:"",width:60,align:"center"}],logistSort:{name:"",order:"asc"},platformSort:{data:"",order:"asc"},logisTotal:[],platformTotalResult:null,platformList:null,singlePlatformList:[],platformListByDate:[],platformListByDateColumns:[{title:"日期",width:80,name:"date"},{title:"数量",name:"num",width:80,align:"center"},{title:"币种",name:"currencyCode",width:60,align:"center"},{title:"金额",name:"amount",width:80,align:"center"}],accountByDayList:[]}},computed:{wrap:function(){return"".concat(c)}},watch:{active2:function(t,a){var e=this;1===t?0===e.platformListByDate.length?e.$nextTick(function(){e.getSinglePlatformByDay()}):e.$nextTick(function(){e.makeSinglePlatformByDateChart()}):e.$nextTick(function(){e.makePlatformTotalByAccountChart()})}},methods:{getFormDate:function(t){var a=this;a.fromDate.fromDate=a.getDateTime(t)},getToDate:function(t){var a=this;a.fromDate.toDate=a.getDateTime(t)},rowClick:function(t,a,e){console.log("row:",a);var o=this,n={url:r["a"].get_accountTotalByDay,type:"POST",data:{fromDate:o.fromDate.fromDate,toDate:o.fromDate.toDate,account:a.name}};o.ajaxData(n).then(function(t){if(0===t.data.code){var a=t.data.datas,e=[];a.forEach(function(t,a){t.amountList.forEach(function(a,o){e.push({date:t.date,currencyCode:a.currencyCode,amount:a.amount,num:a.orderNum})})}),o.accountByDayList=e,o.openSimple=!0}})},search:function(){this.getPlatformTotalByAccount(),this.getSinglePlatformByDay()},init:function(){var t=this;t.getPlatformTotalSale(),t.getPlatformTotalByAccount()},getPlatformTotalSale:function(){var t=this,a={url:r["a"].get_platformTotalSale,data:{fromDate:t.fromDate.fromDate,toDate:t.fromDate.toDate}};t.ajaxData(a).then(function(a){if(0===a.data.code){t.platformTotalResult=a.data.datas;var e=[];t.platformTotalResult.forEach(function(t,a){e.push({name:t.platformId})}),t.platformList=e}})},getPlatformTotalByAccount:function(){var t=this,a={url:r["a"].get_platformTotalAccount,data:{fromDate:t.fromDate.fromDate,toDate:t.fromDate.toDate,platformId:t.selected}};t.ajaxData(a).then(function(a){if(0===a.data.code){var e=a.data.datas,o=[];e.forEach(function(t,a){t.amountList.forEach(function(a,e){o.push({name:t.account,currencyCode:a.currencyCode,amount:a.amount,num:a.orderNum})})}),t.singlePlatformList=o,t.makePlatformTotalByAccountChart()}})},makePlatformTotalByAccountChart:function(){var t=this,a=s.a.init(document.getElementById("pByAccountListMap"));a.clear();var e=[],o=[],n=[];t.singlePlatformList.forEach(function(t,a){e.push({name:t.name+""+"(".concat(t.currencyCode,")"),value:t.amount}),o.push({name:t.name+""+"(".concat(t.currencyCode,")"),value:t.num}),n.push(t.name+""+"(".concat(t.currencyCode,")"))}),a.setOption({title:{top:30,text:"平台账号数据报表",left:"center",subtext:"内环订单金额，外环订单数量"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}<br/> {c} ({d}%)"},legend:{bottom:25,width:"70%",type:"scroll",data:n},series:[{name:"金额",type:"pie",avoidLabelOverlap:!1,selectedMode:"single",radius:[0,"30%"],label:{normal:{show:!1},emphasis:{show:!1,textStyle:{fontSize:"30",fontWeight:"bold"}}},data:e},{name:"数量",type:"pie",radius:["40%","55%"],label:{normal:{formatter:"{d}%"}},data:o}]})},getSinglePlatformByDay:function(){var t=this,a={url:r["a"].get_platformTotalByDay,data:{fromDate:t.fromDate.fromDate,toDate:t.fromDate.toDate,platformId:t.selected}};t.ajaxData(a).then(function(a){if(0===a.data.code){var e=a.data.datas,o=[];e.forEach(function(t,a){t.amountList.forEach(function(a,e){o.push({date:t.date,currencyCode:a.currencyCode,amount:a.amount,num:a.orderNum})})}),t.platformListByDate=o,t.makeSinglePlatformByDateChart()}})},makeSinglePlatformByDateChart:function(){var t=this,a=s.a.init(document.getElementById("pByDayListMap"));a.clear();var e=[],o=[],n=[];t.platformListByDate.forEach(function(t,a){e.push({name:t.date,value:t.amount}),o.push({name:t.date,value:t.num}),n.push(t.date+""+"(".concat(t.currencyCode,")"))}),a.setOption({title:{top:30,text:"平台数据报表",left:"center",subtext:"内环订单金额，外环订单数量"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}<br/> {c} ({d}%)"},legend:{bottom:25,width:"60%",type:"scroll",data:n},series:[{name:"金额",type:"pie",width:"60%",label:{normal:{show:!1,position:"center"}},labelLine:{normal:{show:!1}},selectedMode:"single",radius:[0,"30%"],data:e},{name:"数量",type:"pie",radius:["41%","55%"],label:{normal:{formatter:"{d}%"}},data:o}]})}},mounted:function(){var t=this;t.fromDate.fromDate=t.getQueryString("startTime"),t.fromDate.toDate=t.getQueryString("endTime"),t.selected=decodeURIComponent(t.getQueryStringTwo("platformId")),t.init()}},u=m,d=e("2877"),f=Object(d["a"])(u,o,n,!1,null,null,null);a["default"]=f.exports},"7f7f":function(t,a,e){var o=e("86cc").f,n=Function.prototype,r=/^\s*function ([^ (]*)/,l="name";l in n||e("9e1e")&&o(n,l,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})}}]);